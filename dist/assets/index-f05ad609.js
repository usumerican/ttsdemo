(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?c.credentials="include":e.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(e){if(e.ep)return;e.ep=!0;const c=r(e);fetch(e.href,c)}})();onload=async()=>{const s=document.title,l=document.querySelector(".TextInput"),r=document.querySelector(".LangSelect"),i=document.querySelector(".VoiceSelect"),e=document.querySelector(".PitchSelect"),c=document.querySelector(".RateSelect"),a=document.querySelector(".VolumeSelect"),d=new Map;for(const t of(await q()).sort((n,o)=>n.lang.localeCompare(o.lang))){const n=t.lang;let o=d.get(n);o||(o=[],d.set(n,o)),o.push(t)}document.querySelector(".TitleOutput").textContent=s,r.replaceChildren(...["",...d.keys()].map(t=>new Option("Lang: "+t,t))),e.replaceChildren(...[...Array(21)].map((t,n)=>{const o=(n/10).toFixed(1);return new Option("Pitch: "+o,o)})),c.replaceChildren(...[...Array(100)].map((t,n)=>{const o=((n+1)/10).toFixed(1);return new Option("Rate: "+o,o)})),a.replaceChildren(...[...Array(11)].map((t,n)=>{const o=(n/10).toFixed(1);return new Option("Volume: "+o,o)}));const u=new URLSearchParams(location.search);l.value=u.get("text")||"",g(),r.value=u.get("lang")||"",f(),i.value=u.get("voiceURI")||"",m(e,u.get("pitch"),"1.0"),m(c,u.get("rate"),"1.0"),m(a,u.get("volume"),"1.0"),visualViewport.onresize=()=>{document.body.style.height=visualViewport.height+"px"},onpagehide=()=>{h()},document.querySelector(".SpeakForm").onsubmit=t=>{var O;t.preventDefault(),h();const n=l.value,o=r.value,v=i.value,S=e.value,y=c.value,w=a.value,p=new SpeechSynthesisUtterance(n);p.lang=o,p.voice=(O=d.get(o))==null?void 0:O.find(x=>x.voiceURI===v),p.pitch=parseFloat(S),p.rate=parseFloat(y),p.volume=parseFloat(w),speechSynthesis.speak(p),history.replaceState(null,null,"?"+new URLSearchParams({text:n,lang:o,voiceURI:v,pitch:S,rate:y,volume:w})),g()},document.querySelector(".StopButton").onclick=()=>{h()},r.onchange=()=>{f()};function f(){i.replaceChildren(...[{name:"",localService:!0,voiceURI:""},...d.get(r.value)||[]].map(t=>new Option("Voice: "+t.name+(t.localService?"":" (Remote)"),t.voiceURI)))}function g(){const t=l.value,n=30;document.title=t?t.length>n?t.slice(0,n-1)+"â€¦":t:s}};function m(s,l,r){(s.value=l)||(s.value=r)}function q(){return new Promise((s,l)=>{const r=speechSynthesis.getVoices();r.length?s(r):speechSynthesis.addEventListener("voiceschanged",()=>{q().then(i=>s(i),i=>l(i))},{once:!0})})}function h(){speechSynthesis.cancel()}
